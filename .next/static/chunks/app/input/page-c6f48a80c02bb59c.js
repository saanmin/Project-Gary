(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[17],{5714:(e,t,a)=>{Promise.resolve().then(a.bind(a,1026))},1026:(e,t,a)=>{"use strict";a.r(t),a.d(t,{default:()=>_});var l=a(5155),n=a(2115),r=a(4504),o=a(7541),i=a(8899),s=a(3237),c=a(5895),u=a(7849),E=a(775),d=a(6046);let _=()=>{let{state:e,dispatch:t}=(0,E.x)(),a=(0,d.useRouter)(),_=(0,n.useRef)(null),p=(0,i.J)(),{formData:T,validationErrors:f,dateError:v,showNextSection:A,isCompanyInfoDisabled:D,activeSection:I}=e,{validateCompanyInfo:h,validateSubmission:y}=(0,s.X)(t,T,_);(0,n.useEffect)(()=>{if(A){let e=new Map,a=new IntersectionObserver(a=>{a.forEach(a=>{a.target.id,a.isIntersecting,a.intersectionRatio,a.boundingClientRect,a.rootBounds,a.isIntersecting?e.set(a.target.id,a.intersectionRatio):e.delete(a.target.id);let l=0,n=null;e.forEach((e,t)=>{e>l&&(l=e,n=t)}),n&&t({type:"SET_ACTIVE_SECTION",value:n})})},{root:null,rootMargin:"-20% 0px -20% 0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]});return setTimeout(()=>{document.querySelectorAll("section[id]").forEach(e=>{a.observe(e)})},0),()=>{document.querySelectorAll("section[id]").forEach(e=>a.unobserve(e))}}},[A]),(0,n.useEffect)(()=>{t({type:"SET_ACTIVE_SECTION",value:"companyInfo"});let e=new Map,a=new IntersectionObserver(a=>{a.forEach(a=>{a.target.id,a.isIntersecting,a.intersectionRatio,a.boundingClientRect,a.rootBounds,a.isIntersecting?e.set(a.target.id,a.intersectionRatio):e.delete(a.target.id);let l=0,n=null;e.forEach((e,t)=>{e>l&&(l=e,n=t)}),n&&t({type:"SET_ACTIVE_SECTION",value:n})})},{root:null,rootMargin:"-20% 0px -20% 0px",threshold:[0,.1,.2,.3,.4,.5,.6,.7,.8,.9,1]}),l=document.querySelectorAll("section[id]");return l.forEach(e=>{a.observe(e)}),()=>{l.forEach(e=>a.unobserve(e))}},[]),(0,n.useEffect)(()=>{if(A){let e=document.getElementById("baseDateInfo");e&&e.scrollIntoView({behavior:"smooth"})}},[A]);let R=(0,n.useCallback)((e,a)=>{t({type:"UPDATE_VALIDATION_ERROR",field:e,value:a})},[t]),g=(0,n.useCallback)(e=>{let{name:a,value:l}=e.target;t({type:"UPDATE_FORM_DATA",field:a,value:l}),f[a]&&R(a,!1)},[t,f,R]),O=(0,n.useCallback)(e=>{let a=e.target.value;if(t({type:"UPDATE_FORM_DATA",field:"baseDate",value:a}),10===a.length){let e=a.replace(/-/g,"");t({type:"SET_DATE_ERROR",value:!(0,c.ZV)(e)})}else t({type:"SET_DATE_ERROR",value:!1})},[t]),C=(0,n.useCallback)((e,a)=>{var l,n;let r=(null==e?void 0:null===(n=e.target)||void 0===n?void 0:null===(l=n.files)||void 0===l?void 0:l[0])||null;t({type:"UPDATE_FILE",fileType:a,file:r}),"currentYear"===a&&t({type:"UPDATE_VALIDATION_ERROR",field:"currentYearFile",value:!r})},[t]),b=(0,n.useCallback)(e=>{t({type:"UPDATE_FORM_DATA",field:"companyBondRating",value:e}),t({type:"UPDATE_VALIDATION_ERROR",field:"companyBondRating",value:!1})},[t]),m=(0,n.useCallback)(e=>{e.preventDefault(),y()&&(Object.entries({...T,baseDateTimestamp:new Date(T.baseDate).getTime()}).forEach(e=>{let[a,l]=e;t({type:"UPDATE_FORM_DATA",field:a,value:l})}),a.push("/preview"))},[T,y,t,a]),S=(0,n.useCallback)(()=>{h()&&(t({type:"SET_SHOW_NEXT_SECTION",value:!0}),t({type:"SET_COMPANY_INFO_DISABLED",value:!0}),t({type:"SET_ACTIVE_SECTION",value:"baseDate"}))},[t,h]),N=(0,n.useCallback)(()=>{t({type:"SET_SHOW_NEXT_SECTION",value:!1}),t({type:"SET_COMPANY_INFO_DISABLED",value:!1}),t({type:"SET_ACTIVE_SECTION",value:"companyInfo"})},[t]);return(0,l.jsx)(l.Fragment,{children:(0,l.jsx)("form",{onSubmit:e=>e.preventDefault(),children:(0,l.jsxs)("div",{className:"grid grid-cols-[16rem_1fr] px-8 min-h-screen relative",children:[(0,l.jsx)(r.T,{formData:T,handleChange:g,validationErrors:f,onContinue:S,setValidationErrors:(e,a)=>t({type:"UPDATE_VALIDATION_ERROR",field:e,value:a}),isDisabled:D,companyNameRef:_,className:(0,u.cn)("transition-opacity duration-500",!A&&"opacity-100",A&&"opacity-60"),id:"companyInfo"}),A&&(0,l.jsx)(o.V,{formData:T,handleDateChange:O,dateError:v,dragDropProps:p,handleFileUpload:C,getPreviousYearDate:c.Jj,validationErrors:f,handleCompanyBondRatingChange:b,handleSubmit:m,handleBack:N,className:"section",id:"baseDateInfo"})]})})})}}},e=>{var t=t=>e(e.s=t);e.O(0,[12,141,980,821,55,384,441,898,358],()=>t(5714)),_N_E=e.O()}]);